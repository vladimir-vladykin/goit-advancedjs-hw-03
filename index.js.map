{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/main.js"],"sourcesContent":["const pixabayBaseSearchParams = {\n  key: '49592968-cbe332f50941125abd5725851',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nexport function loadImages(searchQuery) {\n  const searchParams = new URLSearchParams(pixabayBaseSearchParams);\n  searchParams.append('q', searchQuery);\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n  console.log('Request url is', url);\n\n  return fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(json => {\n      return json.hits;\n    });\n}\n","export function clearImages(galleryList) {\n  galleryList.innerHTML = '';\n}\n\nexport function renderImages(galleryList, images) {\n  const markup = images\n    .map(image => {\n      return createImageMarkup(image);\n    })\n    .join('');\n\n  console.log(`Markup is ${markup}`);\n  galleryList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createImageMarkup(image) {\n  return `\n        <li class=\"gallery-item\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <ul class=\"image-metadata-list\">\n                <li class=\"image-metadata-item\">\n                    <p class=\"image-metadata-item-title\">Likes</p>\n                    <p class=\"image-metadata-item-value\">${image.likes}</p>\n                </li>\n                <li class=\"image-metadata-item\">\n                    <p class=\"image-metadata-item-title\">Views</p>\n                    <p class=\"image-metadata-item-value\">${image.views}</p>\n                </li>\n                <li class=\"image-metadata-item\">\n                    <p class=\"image-metadata-item-title\">Comments</p>\n                    <p class=\"image-metadata-item-value\">${image.comments}</p>\n                </li>\n                <li class=\"image-metadata-item\">\n                    <p class=\"image-metadata-item-title\">Downloads</p>\n                    <p class=\"image-metadata-item-value\">${image.downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `;\n}\n","import { loadImages } from './pixabay-api.js';\nimport { renderImages, clearImages } from './render-functions.js';\n\nconst searchButton = document.querySelector('input[name=search]');\nconst searchInput = document.querySelector('.search-form button');\nconst searchForm = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchQuery = event.currentTarget.elements.search.value.trim();\n\n  if (searchQuery === '') {\n    // todo error message if empty?\n    return;\n  }\n\n  startLoadingImages(searchQuery);\n});\n\nfunction startLoadingImages(searchQuery) {\n  // TODO start loading indicator\n  clearImages(galleryList);\n\n  loadImages(searchQuery)\n    .then(images => {\n      if (images.length === 0) {\n        // todo error, and clean up UI\n        console.log('No images found');\n        return;\n      }\n\n      console.log(images);\n      renderImages(galleryList, images);\n    })\n    .catch(error => {\n      console.log(error);\n      // TODO clean up UI and show error\n    });\n}\n"],"names":["pixabayBaseSearchParams","loadImages","searchQuery","searchParams","url","response","json","clearImages","galleryList","renderImages","images","markup","image","createImageMarkup","searchForm","event","startLoadingImages","error"],"mappings":"ssBAAA,MAAMA,EAA0B,CAC9B,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEO,SAASC,EAAWC,EAAa,CACtC,MAAMC,EAAe,IAAI,gBAAgBH,CAAuB,EAChEG,EAAa,OAAO,IAAKD,CAAW,EAEpC,MAAME,EAAM,4BAA4BD,CAAY,GACpD,eAAQ,IAAI,iBAAkBC,CAAG,EAE1B,MAAMA,CAAG,EACb,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GACGA,EAAK,IACb,CACL,CCxBO,SAASC,EAAYC,EAAa,CACvCA,EAAY,UAAY,EAC1B,CAEO,SAASC,EAAaD,EAAaE,EAAQ,CAChD,MAAMC,EAASD,EACZ,IAAIE,GACIC,EAAkBD,CAAK,CAC/B,EACA,KAAK,EAAE,EAEV,QAAQ,IAAI,aAAaD,CAAM,EAAE,EACjCH,EAAY,mBAAmB,YAAaG,CAAM,CACpD,CAEA,SAASE,EAAkBD,EAAO,CAChC,MAAO;AAAA;AAAA,8CAEqCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,2DAIzBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2DAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2DAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2DAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK1E,CCpCqB,SAAS,cAAc,oBAAoB,EAC5C,SAAS,cAAc,qBAAqB,EAChE,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDN,EAAc,SAAS,cAAc,UAAU,EAErDM,EAAW,iBAAiB,SAAUC,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMb,EAAca,EAAM,cAAc,SAAS,OAAO,MAAM,OAE1Db,IAAgB,IAKpBc,EAAmBd,CAAW,CAChC,CAAC,EAED,SAASc,EAAmBd,EAAa,CAEvCK,EAAYC,CAAW,EAEvBP,EAAWC,CAAW,EACnB,KAAKQ,GAAU,CACd,GAAIA,EAAO,SAAW,EAAG,CAEvB,QAAQ,IAAI,iBAAiB,EAC7B,MACD,CAED,QAAQ,IAAIA,CAAM,EAClBD,EAAaD,EAAaE,CAAM,CACtC,CAAK,EACA,MAAMO,GAAS,CACd,QAAQ,IAAIA,CAAK,CAEvB,CAAK,CACL"}